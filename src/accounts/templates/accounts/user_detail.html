{% extends 'main_base.html' %}
{% block title %}Аккаунт{% endblock %}
{% block content %}
    <div class="container">
        <ul style="margin-top: 20px" class="list-group">
            <li class="list-group-item">
                <img style="height: 250px; max-width: 500px"
                     src="{{ profile.photo.url }}"
                     alt="Фото профиля">
            </li>
            <li class="list-group-item">Фамилия: {{ user_.last_name }}</li>
            <li class="list-group-item">Имя: {{ user_.first_name }}</li>
            {% if profile.patronymic %}
                <li class="list-group-item">
                    Отчество: {{ profile.patronymic }}</li>
            {% endif %}
            <li class="list-group-item">Описание:
                {% if profile.description %}
                    {{ profile.description }}
                {% else %}
                    Пользователь не рассказывает о себе
                {% endif %}
            </li>
            <li class="list-group-item">
                {% if profile.cv %}
                    <a href="{{ profile.cv.url }}">Открыть резюме</a>
                {% else %}
                    Резюме: Не загружено
                {% endif %}
            </li>
            <li class="list-group-item">
                {% if profile.belbin.exists %}
                    Роли по Белбину:
                    <ol>
                        {% for role in profile.belbin.all %}
                            <li>{{ role }}</li>
                        {% endfor %}
                    </ol>
                {% else %}
                    Пользователь не прошел тестирование по Белбину
                    {% if user.username == user_.username %}
                        <a href="{% url 'belbin_test' %}">Пройти тест</a>
                    {% endif %}
                {% endif %}
            </li>
            <li class="list-group-item">
                {% if profile.mbti.exists %}
                    Роли по Майерс-Бриггсу:
                    <ul>
                        {% for role in profile.mbti.all %}
                            <li>{{ role }}</li>
                        {% endfor %}
                    </ul>
                {% else %}
                    Пользователь не прошел тестирование по Майерсу-Бриггсу
                    {% if user.username == user_.username %}
                        <a href="{% url 'mbti_test' %}">Пройти тест</a>
                    {% endif %}
                {% endif %}
            </li>
            <li class="list-group-item">
                {% if profile.lsq.exists %}
                    Роли по Хони-Мамфорду:
                    <ul>
                        {% for role in profile.lsq.all %}
                            <li>{{ role }}</li>
                        {% endfor %}
                    </ul>
                {% else %}
                    Пользователь не прошел тестирование по Хони-Мамфорду
                    {% if user.username == user_.username %}
                        <a href="{% url 'lsq_test' %}">Пройти тест</a>
                    {% endif %}
                {% endif %}
            </li>
            {% if profile.remote %}
                <li class="list-group-item">
                    Предпочитает работать: {{ profile.get_remote_value }}
                </li>
            {% endif %}
            {% if profile.specialization.exists %}
                <li class="list-group-item">Специализации:
                    <ul>
                        {% for spec in profile.specialization.all %}
                            <li>{{ spec }}</li>
                        {% endfor %}
                    </ul>
                </li>
            {% endif %}
            {% if profile.city %}
                <li class="list-group-item">Город: {{ profile.city }}</li>
            {% endif %}
            {% if profile.age %}
                <li class="list-group-item">Возраст: {{ profile.age }}
                    лет
                </li>
            {% endif %}
        </ul>

        {% if user_.username == user.username %}
            <div class="row justify-content-md-start">
                <div class="col-6 card">
                    <a class="btn btn-light action-button" role="button"
                       href="{% url 'edit_profile' %}">
                        <b>Редактировать профиль</b>
                    </a>
                </div>
                <div class="col-6 card">
                    <a class="btn btn-light action-button" role="button"
                       href="{% url 'password_change' %}">
                        <b>Сменить пароль</b>
                    </a>
                </div>
                <br>
                <div class="col-6 card text-wrap align-middle">
                    <a class="btn btn-light action-button" role="button"
                       href="{% url 'executor_offer' %}">
                        <b>{% if not profile.executor_offer %}Создать
                        {% else %}Редактировать
                        {% endif %}<br>предложение работника</b>
                    </a>
                </div>
                <div class="col-6 card align-middle">
                    <a class="btn btn-light action-button" role="button"
                       href="{% url 'project_form' %}">
                        <b>{% if not profile.project %}Создать
                        {% else %}Редактировать
                        {% endif %}проект</b>
                    </a>
                </div>
                {% if profile.project %}
                    <div class="col-6 card align-middle">
                        <a class="btn btn-light action-button" role="button"
                           href="{% url 'project_detail' slug=profile.project.title %}">
                            <b>Перейти к проекту</b>
                        </a>
                    </div>
                {% endif %}
                <div class="col-6 card align-middle">
                    <a class="btn btn-light action-button" role="button"
                       href="{% url 'invitations' %}">
                        <b>Посмотреть приглашения и заявки</b>
                    </a>
                </div>
            </div>
        {% elif user.profile.project %}
            <div class="row justify-content-md-start">
                <div class="col-6 card align-middle">
                    <a class="btn btn-light action-button" role="button"
                       href="{% url 'project_invite' title=user.profile.project.title profile=profile.user.username %}">
                        <b>Пригласить в проект</b>
                    </a>
                </div>
            </div>
        {% endif %}
    </div>
{% endblock %}
